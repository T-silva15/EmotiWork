@page
@model EmotiWork.Pages.Backoffice.AdminStatisticsModel
@{
    ViewData["Title"] = "Estatísticas Admin - EmotiWork";
    Layout = null;
}

<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"]</title>
    <link rel="stylesheet" href="~/css/landing.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/sidebar.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/home.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/backoffice.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/backoffice-admin-statistics.css" asp-append-version="true" />
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
    <!-- Chart.js for charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="home-body">
    <!-- Left Sidebar -->
    <aside class="sidebar-left">
        <nav class="sidebar-nav">
            <ul class="nav-items">
                <li class="nav-item">
                    <a href="/Team" class="nav-link">
                        <i class="fas fa-users"></i>
                    </a>
                </li>
                <li class="nav-item active">
                    <a href="/Dashboard" class="nav-link">
                        <i class="fas fa-gauge-high"></i>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/Questionnaire" class="nav-link">
                        <i class="fas fa-circle-question"></i>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/Statistics" class="nav-link">
                        <i class="fas fa-chart-line"></i>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/Notifications" class="nav-link">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge"></span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/Reports" class="nav-link">
                        <i class="fas fa-user-secret"></i>
                    </a>
                </li>
                <li class="nav-item nav-item-bottom">
                    <a href="/Settings" class="nav-link">
                        <i class="fas fa-gear"></i>
                    </a>
                </li>
            </ul>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Top Bar -->
        <header class="top-bar">
            <div class="logo-container">
                <a href="/" class="logo-link">
                    <img src="~/img/emotiwork.png" alt="EmotiWork Logo" class="logo-img" />
                    <span class="logo-text">EmotiWork</span>
                </a>
            </div>
            <div class="user-info">
                <a href="/Profile" class="user-link">
                    <img src="~/img/user-avatar.png" alt="User Avatar" class="user-avatar" />
                    <span class="user-name">ADM</span>
                </a>
            </div>
        </header>

        <!-- Page Content -->
        <div class="content-container admin-statistics-container">
            <div class="admin-statistics-header">
                <h1 class="page-title">ESTATÍSTICAS ADMIN</h1>
                <div class="filters-container">
                    <div class="filter-item">
                        <select class="filter-dropdown" id="periodFilter">
                            <option selected>Semanal</option>
                            <option>Mensal</option>
                            <option>Trimestral</option>
                            <option>Anual</option>
                        </select>
                    </div>
                    <div class="filter-item">
                        <select class="filter-dropdown" id="teamFilter">
                            <option selected>Equipa</option>
                            <option>Mark01</option>
                            <option>Dev02</option>
                            <option>HR03</option>
                            <option>Fin04</option>
                            <option>Sup05</option>
                        </select>
                    </div>
                    <div class="filter-item">
                        <select class="filter-dropdown" id="departmentFilter">
                            <option selected>Departamento</option>
                            <option>Marketing</option>
                            <option>Desenvolvimento</option>
                            <option>Recursos Humanos</option>
                            <option>Finanças</option>
                            <option>Suporte</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="export-container">
                <button class="export-btn" id="exportDataBtn">
                    <i class="fas fa-file-export"></i> Exportar Relatório
                </button>
            </div>

            <!-- Dashboard Cards -->
            <div class="dashboard-cards">
                <div class="dashboard-card">
                    <div class="card-title">Nº de Utilizadores</div>
                    <div class="card-value">125</div>
                    <div class="card-icon"><i class="fas fa-users"></i></div>
                </div>
                <div class="dashboard-card">
                    <div class="card-title">Média de Humor</div>
                    <div class="card-value">32/40</div>
                    <div class="card-icon"><i class="fas fa-face-smile"></i></div>
                </div>
                <div class="dashboard-card">
                    <div class="card-title">Taxa de Resposta</div>
                    <div class="card-value">87%</div>
                    <div class="card-icon"><i class="fas fa-chart-simple"></i></div>
                </div>
                <div class="dashboard-card">
                    <div class="card-title">Departamentos</div>
                    <div class="card-value">5</div>
                    <div class="card-icon"><i class="fas fa-building"></i></div>
                </div>
            </div>

            <!-- Main Content Area with Charts and Stats -->
            <div class="admin-statistics-content">
                <div class="statistics-summary">
                    <h2>Estatísticas Globais</h2>
                    <ul class="stats-list">
                        <li>Total Horas Trabalhadas: 3840H</li>
                        <li>Tarefas Concluídas: 450</li>
                        <li>Média de humor geral: 32/40</li>
                        <li>Departamento + produtivo: Desenvolvimento</li>
                        <li>Equipa com humor mais elevado: Dev02</li>
                        <li>Horas extra totais: 125H</li>
                        <li>Taxa de participação: 87%</li>
                        <li>Total questionários: 580</li>
                        <li>Utilizadores inativos: 8</li>
                    </ul>
                </div>

                <div class="charts-container">
                    <div class="chart-row">
                        <div class="chart-item">
                            <h3 class="chart-title">Distribuição por Departamento</h3>
                            <canvas id="departmentPieChart"></canvas>
                        </div>
                        <div class="chart-item">
                            <h3 class="chart-title">Média de Humor por Departamento</h3>
                            <canvas id="moodBarChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-row">
                        <div class="chart-item wide">
                            <h3 class="chart-title">Evolução de Humor ao Longo do Período</h3>
                            <canvas id="moodLineChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-row">
                        <div class="chart-item">
                            <h3 class="chart-title">Taxa de Resposta</h3>
                            <canvas id="responseRateChart"></canvas>
                        </div>
                        <div class="chart-item">
                            <h3 class="chart-title">Produtividade por Equipa</h3>
                            <canvas id="productivityChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-item">
                        <h3 class="chart-title">Comparação entre Departamentos</h3>
                        <table class="department-comparison">
                            <thead>
                                <tr>
                                    <th>Departamento</th>
                                    <th>Média Humor</th>
                                    <th>Produtividade</th>
                                    <th>Taxa Resposta</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Marketing</td>
                                    <td>
                                        <div class="progress-bar-container">
                                            <div class="progress-bar high" style="width: 85%"></div>
                                        </div>
                                        <span>34/40</span>
                                    </td>
                                    <td>
                                        <div class="progress-bar-container">
                                            <div class="progress-bar medium" style="width: 70%"></div>
                                        </div>
                                        <span>70%</span>
                                    </td>
                                    <td>
                                        <div class="progress-bar-container">
                                            <div class="progress-bar high" style="width: 90%"></div>
                                        </div>
                                        <span>90%</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Desenvolvimento</td>
                                    <td>
                                        <div class="progress-bar-container">
                                            <div class="progress-bar high" style="width: 80%"></div>
                                        </div>
                                        <span>32/40</span>
                                    </td>
                                    <td>
                                        <div class="progress-bar-container">
                                            <div class="progress-bar high" style="width: 95%"></div>
                                        </div>
                                        <span>95%</span>
                                    </td>
                                    <td>
                                        <div class="progress-bar-container">
                                            <div class="progress-bar high" style="width: 88%"></div>
                                        </div>
                                        <span>88%</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Recursos Humanos</td>
                                    <td>
                                        <div class="progress-bar-container">
                                            <div class="progress-bar high" style="width: 75%"></div>
                                        </div>
                                        <span>30/40</span>
                                    </td>
                                    <td>
                                        <div class="progress-bar-container">
                                            <div class="progress-bar medium" style="width: 65%"></div>
                                        </div>
                                        <span>65%</span>
                                    </td>
                                    <td>
                                        <div class="progress-bar-container">
                                            <div class="progress-bar medium" style="width: 72%"></div>
                                        </div>
                                        <span>72%</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Finanças</td>
                                    <td>
                                        <div class="progress-bar-container">
                                            <div class="progress-bar medium" style="width: 70%"></div>
                                        </div>
                                        <span>28/40</span>
                                    </td>
                                    <td>
                                        <div class="progress-bar-container">
                                            <div class="progress-bar high" style="width: 82%"></div>
                                        </div>
                                        <span>82%</span>
                                    </td>
                                    <td>
                                        <div class="progress-bar-container">
                                            <div class="progress-bar high" style="width: 92%"></div>
                                        </div>
                                        <span>92%</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Suporte</td>
                                    <td>
                                        <div class="progress-bar-container">
                                            <div class="progress-bar medium" style="width: 65%"></div>
                                        </div>
                                        <span>26/40</span>
                                    </td>
                                    <td>
                                        <div class="progress-bar-container">
                                            <div class="progress-bar medium" style="width: 75%"></div>
                                        </div>
                                        <span>75%</span>
                                    </td>
                                    <td>
                                        <div class="progress-bar-container">
                                            <div class="progress-bar low" style="width: 55%"></div>
                                        </div>
                                        <span>55%</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="home-footer">
            <div class="footer-content">
                <div class="copyright">EmotiWork - 2025</div>
                <div class="privacy-policy">
                    <a href="#" class="privacy-link">Proteção de Dados</a>
                </div>
            </div>
        </footer>
    </main>

    <script>
        // Sample data for charts (static mockup)
        document.addEventListener('DOMContentLoaded', function() {
            // Department Distribution Chart
            const deptCtx = document.getElementById('departmentPieChart').getContext('2d');
            const deptChart = new Chart(deptCtx, {
                type: 'pie',
                data: {
                    labels: ['Marketing', 'Desenvolvimento', 'Recursos Humanos', 'Finanças', 'Suporte'],
                    datasets: [{
                        data: [15, 35, 20, 18, 12],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.7)',
                            'rgba(54, 162, 235, 0.7)',
                            'rgba(255, 206, 86, 0.7)',
                            'rgba(75, 192, 192, 0.7)',
                            'rgba(153, 102, 255, 0.7)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'right',
                        }
                    }
                }
            });

            // Mood Bar Chart
            const moodBarCtx = document.getElementById('moodBarChart').getContext('2d');
            const moodBarChart = new Chart(moodBarCtx, {
                type: 'bar',
                data: {
                    labels: ['Marketing', 'Desenvolvimento', 'RH', 'Finanças', 'Suporte'],
                    datasets: [{
                        label: 'Média de Humor (/40)',
                        data: [34, 32, 30, 28, 26],
                        backgroundColor: 'rgba(54, 162, 235, 0.7)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 40
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });

            // Line Chart for Mood Over Time
            const lineCtx = document.getElementById('moodLineChart').getContext('2d');
            const lineChart = new Chart(lineCtx, {
                type: 'line',
                data: {
                    labels: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho'],
                    datasets: [{
                        label: 'Marketing',
                        data: [30, 32, 31, 33, 34, 34],
                        borderColor: 'rgba(255, 99, 132, 1)',
                        backgroundColor: 'rgba(255, 99, 132, 0.1)',
                        tension: 0.4,
                        fill: true
                    },
                    {
                        label: 'Desenvolvimento',
                        data: [28, 30, 31, 32, 31, 32],
                        borderColor: 'rgba(54, 162, 235, 1)',
                        backgroundColor: 'rgba(54, 162, 235, 0.1)',
                        tension: 0.4,
                        fill: true
                    },
                    {
                        label: 'Recursos Humanos',
                        data: [27, 28, 29, 30, 29, 30],
                        borderColor: 'rgba(255, 206, 86, 1)',
                        backgroundColor: 'rgba(255, 206, 86, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 25,
                            max: 40
                        }
                    }
                }
            });

            // Response Rate Chart
            const responseRateCtx = document.getElementById('responseRateChart').getContext('2d');
            const responseRateChart = new Chart(responseRateCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Responderam', 'Não Responderam'],
                    datasets: [{
                        data: [87, 13],
                        backgroundColor: [
                            'rgba(75, 192, 192, 0.7)',
                            'rgba(201, 203, 207, 0.7)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });

            // Productivity Chart
            const productivityCtx = document.getElementById('productivityChart').getContext('2d');
            const productivityChart = new Chart(productivityCtx, {
                type: 'radar',
                data: {
                    labels: ['Mark01', 'Dev02', 'HR03', 'Fin04', 'Sup05'],
                    datasets: [{
                        label: 'Produtividade',
                        data: [70, 95, 65, 82, 75],
                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 2,
                        pointBackgroundColor: 'rgba(54, 162, 235, 1)'
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                stepSize: 20
                            }
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>
